import{n as c,F as u,V as p}from"./FlipItem-CXiVc3UF.js";function l(o=new Date){const t=o.getHours(),e=o.getMinutes(),s=o.getSeconds();return[...n(t),...n(e),...n(s)]}function n(o){return o>=10?(""+o).split("").map(t=>Number(t)):[0,o]}const v={components:{FlipItem:u},data(){return{timeArr:l()}},mounted(){this.startTimer()},beforeDestroy(){this.stopTimer()},methods:{startTimer(){this.stopTimer(),this.timer=setTimeout(()=>{this.timeArr=l(),this.startTimer()},1e3)},stopTimer(){clearTimeout(this.timer)}}};var h=function(){var t=this,e=t._self._c;return e("div",{staticClass:"clock-container"},[e("flip-item",{attrs:{total:2,current:t.timeArr[0]}}),e("flip-item",{attrs:{total:9,current:t.timeArr[1]}}),e("div",{staticClass:"colon"}),e("flip-item",{attrs:{total:5,current:t.timeArr[2]}}),e("flip-item",{attrs:{total:9,current:t.timeArr[3]}}),e("div",{staticClass:"colon"}),e("flip-item",{attrs:{total:5,current:t.timeArr[4]}}),e("flip-item",{attrs:{total:9,current:t.timeArr[5]}})],1)},g=[],d=c(v,h,g,!1,null,"88bd3a1f");const m=d.exports,f={components:{FlipClock:m},data(){return{showModal:!1,bgColor:"transparent",scale:1.5,bgOpacity:1,clockX:window.innerWidth/2,clockY:window.innerHeight/2,isDragging:!1,longPressTimer:null,longPressThreshold:300,dragStart:null}},computed:{containerStyle(){return this.bgColor==="transparent"?{background:"transparent"}:{backgroundColor:this.bgColor}},clockStyle(){const o=Math.max(0,Math.min(1,this.bgOpacity));return{position:"absolute",left:`${this.clockX}px`,top:`${this.clockY}px`,transform:`translate(-50%, -50%) scale(${this.scale})`,transformOrigin:"center",opacity:1-o,cursor:this.isDragging?"grabbing":"grab"}}},watch:{bgColor(){this.saveSettings()},scale(){this.saveSettings()},bgOpacity(){this.saveSettings()},clockX(){this.saveSettings()},clockY(){this.saveSettings()}},mounted(){this.loadSettings()},methods:{openModal(){this.showModal=!0},closeModal(){this.showModal=!1},onClockMouseDown(o){this.clearLongPress(),this.longPressTimer=setTimeout(()=>{this.startDrag(o.clientX,o.clientY),window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("mouseup",this.onClockMouseUp)},this.longPressThreshold)},onMouseMove(o){if(!this.isDragging||!this.dragStart)return;const t=o.clientX-this.dragStart.startX,e=o.clientY-this.dragStart.startY;this.clockX=this.dragStart.clockX+t,this.clockY=this.dragStart.clockY+e},onClockMouseUp(){this.clearLongPress(),this.isDragging&&(this.endDrag(),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onClockMouseUp))},onClockTouchStart(o){const t=o.touches&&o.touches[0];t&&(this.clearLongPress(),this.longPressTimer=setTimeout(()=>{this.startDrag(t.clientX,t.clientY),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onClockTouchEnd),window.addEventListener("touchcancel",this.onClockTouchEnd)},this.longPressThreshold))},onTouchMove(o){if(!this.isDragging||!this.dragStart)return;const t=o.touches&&o.touches[0];if(!t)return;const e=t.clientX-this.dragStart.startX,s=t.clientY-this.dragStart.startY;this.clockX=this.dragStart.clockX+e,this.clockY=this.dragStart.clockY+s,o.preventDefault()},onClockTouchEnd(){this.clearLongPress(),this.isDragging&&(this.endDrag(),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onClockTouchEnd),window.removeEventListener("touchcancel",this.onClockTouchEnd))},startDrag(o,t){this.isDragging=!0,this.dragStart={startX:o,startY:t,clockX:this.clockX,clockY:this.clockY}},endDrag(){this.isDragging=!1,this.dragStart=null,this.saveSettings()},clearLongPress(){this.longPressTimer&&(clearTimeout(this.longPressTimer),this.longPressTimer=null)},saveSettings(){const o={bgColor:this.bgColor,scale:this.scale,bgOpacity:this.bgOpacity,position:{x:this.clockX,y:this.clockY}};try{localStorage.setItem("webclock-settings",JSON.stringify(o))}catch{}},loadSettings(){try{const o=localStorage.getItem("webclock-settings");if(!o)return;const t=JSON.parse(o);t&&typeof t=="object"&&(typeof t.bgColor=="string"&&(this.bgColor=t.bgColor),typeof t.scale=="number"&&(this.scale=t.scale),typeof t.bgOpacity=="number"&&(this.bgOpacity=t.bgOpacity),t.position&&typeof t.position.x=="number"&&typeof t.position.y=="number"&&(this.clockX=t.position.x,this.clockY=t.position.y))}catch{}},hexToRgba(o,t=1){const e=o.replace("#","");let s,i,r;if(e.length===3)s=parseInt(e[0]+e[0],16),i=parseInt(e[1]+e[1],16),r=parseInt(e[2]+e[2],16);else{const a=parseInt(e,16);s=a>>16&255,i=a>>8&255,r=a&255}return`rgba(${s}, ${i}, ${r}, ${t})`}}};var _=function(){var t=this,e=t._self._c;return e("div",{staticClass:"test-clock-container",style:t.containerStyle,on:{dblclick:t.openModal}},[e("div",{staticClass:"clock-wrapper",class:{dragging:t.isDragging},style:t.clockStyle,on:{mousedown:t.onClockMouseDown,mouseup:t.onClockMouseUp,touchstart:function(s){return s.stopPropagation(),s.preventDefault(),t.onClockTouchStart.apply(null,arguments)},touchend:function(s){return s.stopPropagation(),s.preventDefault(),t.onClockTouchEnd.apply(null,arguments)}}},[e("flip-clock")],1),t.showModal?e("div",{staticClass:"modal-overlay",on:{click:function(s){return s.target!==s.currentTarget?null:t.closeModal.apply(null,arguments)}}},[e("div",{staticClass:"modal"},[e("h3",[t._v("设置")]),e("label",[t._v(" 背景色 "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.bgColor,expression:"bgColor"}],on:{change:function(s){var i=Array.prototype.filter.call(s.target.options,function(r){return r.selected}).map(function(r){var a="_value"in r?r._value:r.value;return a});t.bgColor=s.target.multiple?i:i[0]}}},[e("option",{attrs:{value:"transparent"}},[t._v("透明")]),e("option",{attrs:{value:"#4c8045"}},[t._v("翠微")]),e("option",{attrs:{value:"#b2b6b6"}},[t._v("月魄")]),e("option",{attrs:{value:"#bfc1a9"}},[t._v("草白")]),e("option",{attrs:{value:"#a8bf8f"}},[t._v("苍葭")]),e("option",{attrs:{value:"#779649"}},[t._v("碧山")]),e("option",{attrs:{value:"#778a77"}},[t._v("青梅")]),e("option",{attrs:{value:"#709bc8"}},[t._v("挼蓝")]),e("option",{attrs:{value:"#246eab"}},[t._v("景泰")]),e("option",{attrs:{value:"#ecd354"}},[t._v("缃叶")]),e("option",{attrs:{value:"#da9b32"}},[t._v("黄不老")]),e("option",{attrs:{value:"#cd5c20"}},[t._v("光明砂")]),e("option",{attrs:{value:"#c9adc4"}},[t._v("凤信")]),e("option",{attrs:{value:"#8c6abe"}},[t._v("紫藤")]),e("option",{attrs:{value:"#843e87"}},[t._v("桔梗")]),e("option",{attrs:{value:"#ad6593"}},[t._v("豆蔻")]),e("option",{attrs:{value:"#090b0c"}},[t._v("墨黑")]),e("option",{attrs:{value:"#ffc0cb"}},[t._v("樱花粉")])])]),e("label",[t._v(" 放大倍数 "),e("select",{directives:[{name:"model",rawName:"v-model.number",value:t.scale,expression:"scale",modifiers:{number:!0}}],on:{change:function(s){var i=Array.prototype.filter.call(s.target.options,function(r){return r.selected}).map(function(r){var a="_value"in r?r._value:r.value;return t._n(a)});t.scale=s.target.multiple?i:i[0]}}},[e("option",{domProps:{value:.5}},[t._v("0.5")]),e("option",{domProps:{value:1}},[t._v("1")]),e("option",{domProps:{value:1.5}},[t._v("1.5")]),e("option",{domProps:{value:2}},[t._v("2")]),e("option",{domProps:{value:2.5}},[t._v("2.5")]),e("option",{domProps:{value:3}},[t._v("3")])])]),e("label",[t._v(" 时钟透明度 "),e("select",{directives:[{name:"model",rawName:"v-model.number",value:t.bgOpacity,expression:"bgOpacity",modifiers:{number:!0}}],on:{change:function(s){var i=Array.prototype.filter.call(s.target.options,function(r){return r.selected}).map(function(r){var a="_value"in r?r._value:r.value;return t._n(a)});t.bgOpacity=s.target.multiple?i:i[0]}}},[e("option",{domProps:{value:0}},[t._v("0")]),e("option",{domProps:{value:.25}},[t._v("25%")]),e("option",{domProps:{value:.5}},[t._v("50%")]),e("option",{domProps:{value:.75}},[t._v("75%")]),e("option",{domProps:{value:1}},[t._v("100%")])])]),e("div",{staticClass:"modal-actions"},[e("button",{on:{click:t.closeModal}},[t._v("关闭")])])])]):t._e()])},b=[],k=c(f,_,b,!1,null,null);const y=k.exports;new p({render:o=>o(y)}).$mount("#app");
